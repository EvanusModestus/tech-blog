<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="description" content="A comprehensive Python framework for managing Cisco ISE at scale, handling everything from bulk operations to automated compliance reporting">
<meta name="keywords" content="ISE, Python, Automation, REST API, Network Security, DevOps">
<meta name="author" content="Evan Rosado">
<title>Automating ISE with Python: Building a Production Management Framework</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Automating ISE with Python: Building a Production Management Framework</h1>
<div class="details">
<span id="author" class="author">Evan Rosado</span><br>
<span id="email" class="email"><a href="mailto:evan.rosado@outlook.com">evan.rosado@outlook.com</a></span><br>
<span id="revdate">2025-01-20</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_framework_architecture">Framework Architecture</a>
<ul class="sectlevel2">
<li><a href="#_core_design_principles">Core Design Principles</a></li>
<li><a href="#_core_api_client">Core API Client</a></li>
</ul>
</li>
<li><a href="#_endpoint_management">Endpoint Management</a>
<ul class="sectlevel2">
<li><a href="#_bulk_endpoint_operations">Bulk Endpoint Operations</a></li>
</ul>
</li>
<li><a href="#_policy_management">Policy Management</a>
<ul class="sectlevel2">
<li><a href="#_automated_policy_deployment">Automated Policy Deployment</a></li>
</ul>
</li>
<li><a href="#_operational_automation">Operational Automation</a>
<ul class="sectlevel2">
<li><a href="#_zero_downtime_upgrades">Zero-Downtime Upgrades</a></li>
</ul>
</li>
<li><a href="#_integration_examples">Integration Examples</a>
<ul class="sectlevel2">
<li><a href="#_servicenow_integration">ServiceNow Integration</a></li>
</ul>
</li>
<li><a href="#_production_deployment">Production Deployment</a>
<ul class="sectlevel2">
<li><a href="#_daily_operations_script">Daily Operations Script</a></li>
</ul>
</li>
<li><a href="#_performance_metrics">Performance Metrics</a></li>
<li><a href="#_lessons_learned">Lessons Learned</a>
<ul class="sectlevel2">
<li><a href="#_what_works">What Works</a></li>
<li><a href="#_common_pitfalls">Common Pitfalls</a></li>
</ul>
</li>
<li><a href="#_conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>After managing ISE deployments with 75,000+ endpoints, manual operations become impossible. This post details the Python automation framework I&#8217;ve built over five years, handling everything from bulk endpoint management to automated compliance reporting and zero-downtime upgrades.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you&#8217;re responsible for ISE infrastructure supporting critical business operations, every minute of downtime costs thousands of dollars. Manual changes introduce risk. Repetitive tasks waste engineering time. After my third all-night maintenance window doing manual endpoint imports, I decided to automate everything.</p>
</div>
<div class="paragraph">
<p>This framework now handles:
* Daily management of 75,000+ endpoints
* Automated policy deployment across 12 ISE nodes
* Compliance reporting for security audits
* Zero-downtime upgrades and patches
* Integration with ServiceNow and Splunk
* Automated backup and disaster recovery</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_framework_architecture">Framework Architecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_core_design_principles">Core Design Principles</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python">"""
ISE Automation Framework Architecture

Principles:
1. Idempotent operations - safe to run multiple times
2. Comprehensive logging - every action is auditable
3. Graceful failure handling - partial success is better than total failure
4. Performance optimization - bulk operations over individual calls
5. Security first - credentials in vault, encryption at rest
"""

# Framework structure
ise_automation/
├── core/
│   ├── client.py          # ISE REST API client
│   ├── auth.py            # Authentication handling
│   ├── exceptions.py      # Custom exceptions
│   └── utils.py           # Utility functions
├── managers/
│   ├── endpoint.py        # Endpoint management
│   ├── policy.py          # Policy management
│   ├── identity.py        # Identity group management
│   ├── device.py          # Network device management
│   └── guest.py           # Guest portal management
├── operations/
│   ├── backup.py          # Backup operations
│   ├── upgrade.py         # Upgrade automation
│   ├── compliance.py      # Compliance checks
│   └── reporting.py       # Report generation
├── integrations/
│   ├── servicenow.py      # ServiceNow integration
│   ├── splunk.py          # Splunk integration
│   ├── vault.py           # HashiCorp Vault
│   └── teams.py           # Microsoft Teams notifications
└── scripts/
    ├── daily_tasks.py     # Daily automation
    ├── emergency.py       # Emergency procedures
    └── migration.py       # Migration tools</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_core_api_client">Core API Client</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"># core/client.py - Production-tested ISE API client
import requests
import time
import logging
from typing import Dict, List, Optional, Any
from functools import wraps
from urllib3.util.retry import Retry
from requests.adapters import HTTPAdapter
import concurrent.futures
from dataclasses import dataclass

logger = logging.getLogger(__name__)

@dataclass
class ISENode:
    """ISE node configuration"""
    hostname: str
    ip: str
    role: str  # PAN, MNT, PSN, pxGrid
    region: str
    active: bool = True

class RateLimiter:
    """Rate limiter to prevent API throttling"""
    def __init__(self, calls_per_second: int = 10):
        self.calls_per_second = calls_per_second
        self.min_interval = 1.0 / calls_per_second
        self.last_call = 0

    def wait(self):
        """Wait if necessary to maintain rate limit"""
        elapsed = time.time() - self.last_call
        if elapsed &lt; self.min_interval:
            time.sleep(self.min_interval - elapsed)
        self.last_call = time.time()

def retry_on_failure(max_retries: int = 3, backoff_factor: float = 1.0):
    """Decorator for automatic retry with exponential backoff"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            last_exception = None
            for attempt in range(max_retries):
                try:
                    return func(*args, **kwargs)
                except Exception as e:
                    last_exception = e
                    wait_time = backoff_factor * (2 ** attempt)
                    logger.warning(f"Attempt {attempt + 1} failed: {e}. "
                                 f"Retrying in {wait_time}s...")
                    time.sleep(wait_time)
            raise last_exception
        return wrapper
    return decorator

class ISEClient:
    """Production ISE REST API Client"""

    def __init__(self, nodes: List[ISENode], username: str, password: str,
                 verify_ssl: bool = False, timeout: int = 30):
        self.nodes = nodes
        self.username = username
        self.password = password
        self.verify_ssl = verify_ssl
        self.timeout = timeout
        self.rate_limiter = RateLimiter(calls_per_second=10)

        # Session with retry strategy
        self.session = self._create_session()

        # Find active PAN
        self.pan_node = self._get_active_pan()
        self.base_url = f"https://{self.pan_node.ip}:9060/ers"

        # Headers for all requests
        self.headers = {
            "Accept": "application/json",
            "Content-Type": "application/json",
        }

    def _create_session(self) -&gt; requests.Session:
        """Create session with retry strategy"""
        session = requests.Session()
        session.auth = (self.username, self.password)
        session.verify = self.verify_ssl

        # Retry strategy
        retry_strategy = Retry(
            total=3,
            backoff_factor=1,
            status_forcelist=[429, 500, 502, 503, 504],
        )
        adapter = HTTPAdapter(max_retries=retry_strategy)
        session.mount("https://", adapter)

        return session

    def _get_active_pan(self) -&gt; ISENode:
        """Find active PAN node"""
        for node in self.nodes:
            if node.role == "PAN" and node.active:
                try:
                    # Test connectivity
                    response = self.session.get(
                        f"https://{node.ip}:9060/ers/config/node",
                        timeout=5
                    )
                    if response.status_code == 200:
                        logger.info(f"Active PAN found: {node.hostname}")
                        return node
                except Exception as e:
                    logger.warning(f"Node {node.hostname} not responding: {e}")

        raise Exception("No active PAN node found")

    @retry_on_failure(max_retries=3)
    def get(self, endpoint: str, params: Optional[Dict] = None) -&gt; Dict:
        """GET request with retry logic"""
        self.rate_limiter.wait()

        url = f"{self.base_url}/{endpoint}"
        response = self.session.get(
            url,
            headers=self.headers,
            params=params,
            timeout=self.timeout
        )

        if response.status_code != 200:
            logger.error(f"GET {url} failed: {response.status_code} - {response.text}")
            response.raise_for_status()

        return response.json()

    @retry_on_failure(max_retries=3)
    def post(self, endpoint: str, data: Dict) -&gt; Dict:
        """POST request with retry logic"""
        self.rate_limiter.wait()

        url = f"{self.base_url}/{endpoint}"
        response = self.session.post(
            url,
            headers=self.headers,
            json=data,
            timeout=self.timeout
        )

        if response.status_code not in [200, 201]:
            logger.error(f"POST {url} failed: {response.status_code} - {response.text}")
            response.raise_for_status()

        return response.json() if response.text else {}

    def bulk_operation(self, operation: str, items: List[Dict],
                      batch_size: int = 500) -&gt; Dict[str, Any]:
        """Execute bulk operations with batching"""
        results = {
            "success": [],
            "failed": [],
            "total": len(items)
        }

        # Process in batches
        for i in range(0, len(items), batch_size):
            batch = items[i:i + batch_size]
            logger.info(f"Processing batch {i // batch_size + 1} "
                       f"({len(batch)} items)")

            # Parallel processing within batch
            with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:
                futures = {
                    executor.submit(operation, item): item
                    for item in batch
                }

                for future in concurrent.futures.as_completed(futures):
                    item = futures[future]
                    try:
                        result = future.result()
                        results["success"].append(result)
                    except Exception as e:
                        logger.error(f"Failed to process {item}: {e}")
                        results["failed"].append({"item": item, "error": str(e)})

        return results

    def health_check(self) -&gt; Dict[str, Any]:
        """Check health of all ISE nodes"""
        health_status = {}

        for node in self.nodes:
            try:
                response = self.session.get(
                    f"https://{node.ip}:9060/ers/config/node",
                    timeout=5
                )
                health_status[node.hostname] = {
                    "status": "healthy" if response.status_code == 200 else "unhealthy",
                    "response_time": response.elapsed.total_seconds(),
                    "role": node.role
                }
            except Exception as e:
                health_status[node.hostname] = {
                    "status": "unreachable",
                    "error": str(e),
                    "role": node.role
                }

        return health_status</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_endpoint_management">Endpoint Management</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bulk_endpoint_operations">Bulk Endpoint Operations</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"># managers/endpoint.py - Endpoint management at scale
import pandas as pd
import hashlib
from typing import List, Dict, Optional
from datetime import datetime, timedelta

class EndpointManager:
    """Manage ISE endpoints at scale"""

    def __init__(self, client: ISEClient):
        self.client = client
        self.cache = {}
        self.cache_ttl = 300  # 5 minutes

    def import_from_csv(self, csv_file: str, validate: bool = True) -&gt; Dict:
        """Import endpoints from CSV file"""
        df = pd.read_csv(csv_file)

        # Validate data
        if validate:
            df = self._validate_endpoints(df)

        # Convert to ISE format
        endpoints = []
        for _, row in df.iterrows():
            endpoint = {
                "ERSEndPoint": {
                    "name": row['mac_address'].replace(':', '').upper(),
                    "mac": self._normalize_mac(row['mac_address']),
                    "groupId": self._get_group_id(row.get('group', 'Unknown')),
                    "staticGroupAssignment": True,
                    "customAttributes": {
                        "attributes": {
                            "Owner": row.get('owner', 'Unknown'),
                            "Department": row.get('department', 'IT'),
                            "AssetTag": row.get('asset_tag', ''),
                            "Location": row.get('location', ''),
                            "DeviceType": row.get('device_type', 'Unknown')
                        }
                    }
                }
            }

            # Add profile if specified
            if 'profile' in row and pd.notna(row['profile']):
                endpoint["ERSEndPoint"]["profileId"] = self._get_profile_id(row['profile'])

            endpoints.append(endpoint)

        # Bulk import
        results = self._bulk_create(endpoints)

        # Generate report
        self._generate_import_report(results, csv_file)

        return results

    def _validate_endpoints(self, df: pd.DataFrame) -&gt; pd.DataFrame:
        """Validate endpoint data"""
        # Remove duplicates
        df = df.drop_duplicates(subset=['mac_address'])

        # Validate MAC addresses
        df['mac_valid'] = df['mac_address'].apply(self._is_valid_mac)
        invalid_macs = df[~df['mac_valid']]

        if not invalid_macs.empty:
            logger.warning(f"Found {len(invalid_macs)} invalid MAC addresses")
            df = df[df['mac_valid']]

        # Normalize MAC addresses
        df['mac_address'] = df['mac_address'].apply(self._normalize_mac)

        return df

    def _normalize_mac(self, mac: str) -&gt; str:
        """Normalize MAC address format"""
        # Remove all separators
        mac = mac.replace(':', '').replace('-', '').replace('.', '').upper()

        # Insert colons every 2 characters
        return ':'.join(mac[i:i+2] for i in range(0, 12, 2))

    def _is_valid_mac(self, mac: str) -&gt; bool:
        """Validate MAC address format"""
        import re
        # Accept various formats
        patterns = [
            r'^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$',  # AA:BB:CC:DD:EE:FF
            r'^([0-9A-Fa-f]{4}\.){2}([0-9A-Fa-f]{4})$',     # AABB.CCDD.EEFF
            r'^[0-9A-Fa-f]{12}$'                             # AABBCCDDEEFF
        ]
        return any(re.match(pattern, mac) for pattern in patterns)

    def _bulk_create(self, endpoints: List[Dict], batch_size: int = 500) -&gt; Dict:
        """Bulk create endpoints"""
        results = {
            "created": [],
            "updated": [],
            "failed": [],
            "total": len(endpoints)
        }

        for i in range(0, len(endpoints), batch_size):
            batch = endpoints[i:i + batch_size]
            logger.info(f"Processing batch {i // batch_size + 1}")

            for endpoint in batch:
                try:
                    # Check if exists
                    mac = endpoint["ERSEndPoint"]["mac"]
                    existing = self._get_endpoint_by_mac(mac)

                    if existing:
                        # Update existing
                        endpoint["ERSEndPoint"]["id"] = existing["id"]
                        response = self.client.put(
                            f"config/endpoint/{existing['id']}",
                            endpoint
                        )
                        results["updated"].append(mac)
                    else:
                        # Create new
                        response = self.client.post("config/endpoint", endpoint)
                        results["created"].append(mac)

                except Exception as e:
                    logger.error(f"Failed to process {mac}: {e}")
                    results["failed"].append({"mac": mac, "error": str(e)})

        return results

    def _get_endpoint_by_mac(self, mac: str) -&gt; Optional[Dict]:
        """Get endpoint by MAC address"""
        try:
            response = self.client.get(f"config/endpoint?filter=mac.EQ.{mac}")
            if response.get("SearchResult", {}).get("total", 0) &gt; 0:
                endpoint_id = response["SearchResult"]["resources"][0]["id"]
                return self.client.get(f"config/endpoint/{endpoint_id}")["ERSEndPoint"]
        except:
            return None

    def quarantine_endpoint(self, mac: str, reason: str = "Security violation") -&gt; bool:
        """Move endpoint to quarantine group"""
        try:
            endpoint = self._get_endpoint_by_mac(mac)
            if not endpoint:
                logger.error(f"Endpoint {mac} not found")
                return False

            # Update to quarantine group
            quarantine_group_id = self._get_group_id("Quarantine")
            endpoint["groupId"] = quarantine_group_id
            endpoint["customAttributes"]["attributes"]["QuarantineReason"] = reason
            endpoint["customAttributes"]["attributes"]["QuarantineTime"] = datetime.now().isoformat()

            self.client.put(f"config/endpoint/{endpoint['id']}", {"ERSEndPoint": endpoint})

            # Send notification
            self._send_quarantine_notification(mac, reason)

            logger.info(f"Endpoint {mac} quarantined: {reason}")
            return True

        except Exception as e:
            logger.error(f"Failed to quarantine {mac}: {e}")
            return False

    def bulk_delete_stale(self, days_inactive: int = 90) -&gt; Dict:
        """Delete endpoints not seen for specified days"""
        cutoff_date = datetime.now() - timedelta(days=days_inactive)

        # Get all endpoints
        all_endpoints = self._get_all_endpoints()

        stale_endpoints = []
        for endpoint in all_endpoints:
            # Check last authentication time
            last_auth = self._get_last_authentication(endpoint["mac"])

            if last_auth and last_auth &lt; cutoff_date:
                stale_endpoints.append(endpoint)

        if stale_endpoints:
            logger.info(f"Found {len(stale_endpoints)} stale endpoints")

            # Confirm before deletion
            if self._confirm_bulk_delete(stale_endpoints):
                return self._bulk_delete(stale_endpoints)

        return {"deleted": [], "failed": [], "total": 0}

    def _bulk_delete(self, endpoints: List[Dict]) -&gt; Dict:
        """Bulk delete endpoints"""
        results = {"deleted": [], "failed": [], "total": len(endpoints)}

        for endpoint in endpoints:
            try:
                self.client.delete(f"config/endpoint/{endpoint['id']}")
                results["deleted"].append(endpoint["mac"])
            except Exception as e:
                logger.error(f"Failed to delete {endpoint['mac']}: {e}")
                results["failed"].append({"mac": endpoint["mac"], "error": str(e)})

        return results

    def generate_compliance_report(self, output_file: str = None) -&gt; pd.DataFrame:
        """Generate endpoint compliance report"""
        all_endpoints = self._get_all_endpoints()

        report_data = []
        for endpoint in all_endpoints:
            # Get endpoint details
            details = self.client.get(f"config/endpoint/{endpoint['id']}")["ERSEndPoint"]

            # Get authentication history
            auth_history = self._get_authentication_history(endpoint["mac"])

            # Determine compliance status
            compliance_status = self._check_compliance(details, auth_history)

            report_data.append({
                "MAC Address": endpoint["mac"],
                "Name": details.get("name", ""),
                "Group": self._get_group_name(details.get("groupId", "")),
                "Profile": self._get_profile_name(details.get("profileId", "")),
                "Owner": details.get("customAttributes", {}).get("attributes", {}).get("Owner", "Unknown"),
                "Department": details.get("customAttributes", {}).get("attributes", {}).get("Department", "Unknown"),
                "Last Seen": auth_history[-1]["timestamp"] if auth_history else "Never",
                "Auth Success Rate": self._calculate_auth_success_rate(auth_history),
                "Compliance Status": compliance_status["status"],
                "Compliance Issues": ", ".join(compliance_status["issues"])
            })

        df = pd.DataFrame(report_data)

        if output_file:
            df.to_excel(output_file, index=False)
            logger.info(f"Compliance report saved to {output_file}")

        return df

    def _check_compliance(self, endpoint: Dict, auth_history: List[Dict]) -&gt; Dict:
        """Check endpoint compliance"""
        issues = []

        # Check if profiled
        if not endpoint.get("profileId"):
            issues.append("Not profiled")

        # Check if grouped properly
        if endpoint.get("groupId") == self._get_group_id("Unknown"):
            issues.append("Unknown group")

        # Check authentication frequency
        if auth_history:
            last_auth = datetime.fromisoformat(auth_history[-1]["timestamp"])
            if (datetime.now() - last_auth).days &gt; 30:
                issues.append("Inactive &gt; 30 days")

            # Check for authentication failures
            failures = [a for a in auth_history if not a["success"]]
            if len(failures) &gt; len(auth_history) * 0.1:  # More than 10% failures
                issues.append("High auth failure rate")
        else:
            issues.append("Never authenticated")

        return {
            "status": "Non-Compliant" if issues else "Compliant",
            "issues": issues
        }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_policy_management">Policy Management</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_automated_policy_deployment">Automated Policy Deployment</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"># managers/policy.py - Policy automation
import yaml
import json
from typing import Dict, List
import difflib

class PolicyManager:
    """Manage ISE policies with version control"""

    def __init__(self, client: ISEClient):
        self.client = client
        self.policy_cache = {}

    def export_policies(self, output_file: str, format: str = "yaml") -&gt; None:
        """Export all policies for backup/version control"""
        policies = {
            "authentication": self._export_auth_policies(),
            "authorization": self._export_authz_policies(),
            "profiling": self._export_profiling_policies(),
            "posture": self._export_posture_policies(),
            "guest": self._export_guest_policies()
        }

        if format == "yaml":
            with open(output_file, 'w') as f:
                yaml.dump(policies, f, default_flow_style=False)
        else:
            with open(output_file, 'w') as f:
                json.dump(policies, f, indent=2)

        logger.info(f"Policies exported to {output_file}")

    def import_policies(self, input_file: str, dry_run: bool = True) -&gt; Dict:
        """Import policies from file with validation"""
        # Load policies
        with open(input_file, 'r') as f:
            if input_file.endswith('.yaml'):
                policies = yaml.safe_load(f)
            else:
                policies = json.load(f)

        # Validate structure
        validation_results = self._validate_policy_structure(policies)
        if not validation_results["valid"]:
            logger.error(f"Policy validation failed: {validation_results['errors']}")
            return validation_results

        # Compare with existing
        changes = self._compare_policies(policies)

        if dry_run:
            logger.info("Dry run mode - no changes applied")
            return {"changes": changes, "applied": False}

        # Apply changes
        results = self._apply_policy_changes(changes)
        return results

    def _compare_policies(self, new_policies: Dict) -&gt; Dict:
        """Compare new policies with existing"""
        changes = {
            "create": [],
            "update": [],
            "delete": [],
            "unchanged": []
        }

        existing = self.export_policies("/tmp/current_policies.yaml")

        # Deep comparison
        for policy_type, policies in new_policies.items():
            existing_type = existing.get(policy_type, {})

            for policy_name, policy_config in policies.items():
                if policy_name in existing_type:
                    if policy_config != existing_type[policy_name]:
                        changes["update"].append({
                            "type": policy_type,
                            "name": policy_name,
                            "diff": self._generate_diff(
                                existing_type[policy_name],
                                policy_config
                            )
                        })
                    else:
                        changes["unchanged"].append({
                            "type": policy_type,
                            "name": policy_name
                        })
                else:
                    changes["create"].append({
                        "type": policy_type,
                        "name": policy_name,
                        "config": policy_config
                    })

            # Check for deletions
            for policy_name in existing_type:
                if policy_name not in policies:
                    changes["delete"].append({
                        "type": policy_type,
                        "name": policy_name
                    })

        return changes

    def _generate_diff(self, old: Dict, new: Dict) -&gt; str:
        """Generate human-readable diff"""
        old_str = yaml.dump(old, default_flow_style=False)
        new_str = yaml.dump(new, default_flow_style=False)

        diff = difflib.unified_diff(
            old_str.splitlines(keepends=True),
            new_str.splitlines(keepends=True),
            fromfile="current",
            tofile="new"
        )

        return ''.join(diff)

    def create_authorization_rule(self, name: str, conditions: Dict,
                                 profile: str, position: int = None) -&gt; Dict:
        """Create authorization rule with validation"""
        # Build rule
        rule = {
            "rule": {
                "name": name,
                "default": False,
                "state": "enabled",
                "condition": self._build_condition(conditions),
                "profile": [profile]
            }
        }

        # Validate rule
        validation = self._validate_authorization_rule(rule)
        if not validation["valid"]:
            raise ValueError(f"Invalid rule: {validation['errors']}")

        # Create rule
        response = self.client.post("config/authorizationprofile/authorizationrule", rule)

        # Position rule if specified
        if position is not None:
            self._reorder_rules(name, position)

        logger.info(f"Authorization rule '{name}' created")
        return response

    def _build_condition(self, conditions: Dict) -&gt; Dict:
        """Build ISE condition from simplified format"""
        # Handle simple conditions
        if "attribute" in conditions:
            return {
                "conditionType": "ConditionAttributes",
                "isNegate": conditions.get("negate", False),
                "dictionaryName": conditions.get("dictionary", "DEVICE"),
                "attributeName": conditions["attribute"],
                "operator": conditions.get("operator", "equals"),
                "attributeValue": conditions["value"]
            }

        # Handle compound conditions
        if "and" in conditions:
            return {
                "conditionType": "ConditionAndBlock",
                "children": [
                    self._build_condition(cond)
                    for cond in conditions["and"]
                ]
            }

        if "or" in conditions:
            return {
                "conditionType": "ConditionOrBlock",
                "children": [
                    self._build_condition(cond)
                    for cond in conditions["or"]
                ]
            }

        raise ValueError(f"Invalid condition format: {conditions}")

    def deploy_policy_set(self, policy_file: str, environment: str = "production") -&gt; Dict:
        """Deploy complete policy set with rollback capability"""
        # Create backup
        backup_file = f"/tmp/policy_backup_{datetime.now().strftime('%Y%m%d_%H%M%S')}.yaml"
        self.export_policies(backup_file)
        logger.info(f"Backup created: {backup_file}")

        try:
            # Load and validate policy set
            with open(policy_file, 'r') as f:
                policy_set = yaml.safe_load(f)

            # Environment-specific adjustments
            if environment == "staging":
                policy_set = self._adjust_for_staging(policy_set)

            # Deploy in phases
            results = {
                "phase1_auth": self._deploy_auth_policies(policy_set.get("authentication", {})),
                "phase2_authz": self._deploy_authz_policies(policy_set.get("authorization", {})),
                "phase3_profiling": self._deploy_profiling_policies(policy_set.get("profiling", {})),
                "phase4_posture": self._deploy_posture_policies(policy_set.get("posture", {}))
            }

            # Verify deployment
            verification = self._verify_deployment(policy_set)
            if not verification["success"]:
                logger.error("Deployment verification failed, rolling back")
                self.rollback(backup_file)
                return {"status": "failed", "rollback": True, "errors": verification["errors"]}

            logger.info("Policy deployment successful")
            return {"status": "success", "results": results}

        except Exception as e:
            logger.error(f"Policy deployment failed: {e}")
            self.rollback(backup_file)
            return {"status": "failed", "rollback": True, "error": str(e)}

    def rollback(self, backup_file: str) -&gt; bool:
        """Rollback to previous policy configuration"""
        logger.warning(f"Rolling back to {backup_file}")
        try:
            self.import_policies(backup_file, dry_run=False)
            logger.info("Rollback successful")
            return True
        except Exception as e:
            logger.error(f"Rollback failed: {e}")
            return False</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operational_automation">Operational Automation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_zero_downtime_upgrades">Zero-Downtime Upgrades</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"># operations/upgrade.py - Automated ISE upgrades
import subprocess
from datetime import datetime, timedelta
import time

class UpgradeManager:
    """Manage ISE upgrades with zero downtime"""

    def __init__(self, client: ISEClient, nodes: List[ISENode]):
        self.client = client
        self.nodes = nodes
        self.upgrade_log = []

    def plan_upgrade(self, target_version: str) -&gt; Dict:
        """Plan upgrade sequence for zero downtime"""
        current_versions = self._get_node_versions()

        # Determine upgrade order
        upgrade_plan = {
            "target_version": target_version,
            "phases": []
        }

        # Phase 1: Secondary nodes
        phase1 = {
            "phase": 1,
            "description": "Secondary Admin Nodes",
            "nodes": [n for n in self.nodes if n.role == "PAN" and not n.active]
        }

        # Phase 2: PSN nodes (rolling upgrade)
        psn_nodes = [n for n in self.nodes if n.role == "PSN"]
        psn_groups = self._group_psns_by_region(psn_nodes)

        phase2 = {
            "phase": 2,
            "description": "Policy Service Nodes (Rolling)",
            "groups": psn_groups
        }

        # Phase 3: MnT nodes
        phase3 = {
            "phase": 3,
            "description": "Monitoring Nodes",
            "nodes": [n for n in self.nodes if n.role == "MNT"]
        }

        # Phase 4: Primary PAN
        phase4 = {
            "phase": 4,
            "description": "Primary Admin Node",
            "nodes": [n for n in self.nodes if n.role == "PAN" and n.active]
        }

        upgrade_plan["phases"] = [phase1, phase2, phase3, phase4]

        # Validate plan
        validation = self._validate_upgrade_plan(upgrade_plan)
        upgrade_plan["validation"] = validation

        return upgrade_plan

    def execute_upgrade(self, plan: Dict, auto_confirm: bool = False) -&gt; Dict:
        """Execute upgrade plan"""
        results = {
            "start_time": datetime.now(),
            "phases": [],
            "success": True
        }

        for phase in plan["phases"]:
            phase_result = {
                "phase": phase["phase"],
                "description": phase["description"],
                "nodes": [],
                "start_time": datetime.now()
            }

            if phase["phase"] == 2:  # PSN rolling upgrade
                phase_result = self._execute_psn_rolling_upgrade(phase["groups"])
            else:
                for node in phase.get("nodes", []):
                    node_result = self._upgrade_node(node, plan["target_version"])
                    phase_result["nodes"].append(node_result)

                    if not node_result["success"]:
                        results["success"] = False
                        if not auto_confirm:
                            if not self._confirm_continue():
                                logger.error("Upgrade aborted by user")
                                return results

            phase_result["end_time"] = datetime.now()
            phase_result["duration"] = (
                phase_result["end_time"] - phase_result["start_time"]
            ).total_seconds()

            results["phases"].append(phase_result)

            # Wait between phases
            if phase["phase"] &lt; 4:
                logger.info("Waiting 10 minutes before next phase...")
                time.sleep(600)

        results["end_time"] = datetime.now()
        results["total_duration"] = (
            results["end_time"] - results["start_time"]
        ).total_seconds()

        return results

    def _execute_psn_rolling_upgrade(self, psn_groups: List[List[ISENode]]) -&gt; Dict:
        """Execute rolling PSN upgrade maintaining service"""
        results = {
            "groups": [],
            "success": True
        }

        for group_idx, group in enumerate(psn_groups):
            logger.info(f"Upgrading PSN group {group_idx + 1}/{len(psn_groups)}")

            # Remove group from load balancer
            self._remove_from_lb([n.ip for n in group])

            # Upgrade nodes in parallel
            group_results = []
            with concurrent.futures.ThreadPoolExecutor(max_workers=len(group)) as executor:
                futures = {
                    executor.submit(self._upgrade_node, node): node
                    for node in group
                }

                for future in concurrent.futures.as_completed(futures):
                    node = futures[future]
                    result = future.result()
                    group_results.append(result)

            # Verify upgraded nodes
            for node in group:
                if self._verify_node_health(node):
                    # Add back to load balancer
                    self._add_to_lb(node.ip)
                else:
                    results["success"] = False
                    logger.error(f"Node {node.hostname} failed health check after upgrade")

            results["groups"].append({
                "group": group_idx + 1,
                "nodes": group_results
            })

            # Wait before next group
            if group_idx &lt; len(psn_groups) - 1:
                logger.info("Waiting 5 minutes before next group...")
                time.sleep(300)

        return results

    def _upgrade_node(self, node: ISENode, target_version: str) -&gt; Dict:
        """Upgrade individual node"""
        result = {
            "node": node.hostname,
            "start_time": datetime.now(),
            "success": False
        }

        try:
            logger.info(f"Starting upgrade of {node.hostname} to {target_version}")

            # Pre-upgrade checks
            pre_checks = self._pre_upgrade_checks(node)
            if not pre_checks["passed"]:
                result["error"] = f"Pre-upgrade checks failed: {pre_checks['issues']}"
                return result

            # Trigger upgrade
            upgrade_response = self._trigger_upgrade(node, target_version)
            result["upgrade_id"] = upgrade_response["id"]

            # Monitor upgrade progress
            upgrade_status = self._monitor_upgrade(node, upgrade_response["id"])
            result["duration"] = upgrade_status["duration"]

            if upgrade_status["status"] == "completed":
                # Post-upgrade verification
                post_checks = self._post_upgrade_checks(node, target_version)
                if post_checks["passed"]:
                    result["success"] = True
                    logger.info(f"Node {node.hostname} upgraded successfully")
                else:
                    result["error"] = f"Post-upgrade checks failed: {post_checks['issues']}"
            else:
                result["error"] = f"Upgrade failed: {upgrade_status['error']}"

        except Exception as e:
            result["error"] = str(e)
            logger.error(f"Upgrade failed for {node.hostname}: {e}")

        result["end_time"] = datetime.now()
        return result

    def _pre_upgrade_checks(self, node: ISENode) -&gt; Dict:
        """Pre-upgrade validation"""
        checks = {
            "passed": True,
            "issues": []
        }

        # Check disk space
        disk_space = self._check_disk_space(node)
        if disk_space["available_gb"] &lt; 20:
            checks["passed"] = False
            checks["issues"].append(f"Insufficient disk space: {disk_space['available_gb']}GB")

        # Check replication status
        replication = self._check_replication_status(node)
        if not replication["in_sync"]:
            checks["passed"] = False
            checks["issues"].append("Replication not in sync")

        # Check for active sessions
        if node.role == "PSN":
            active_sessions = self._get_active_sessions(node)
            if active_sessions &gt; 1000:
                logger.warning(f"High active sessions on {node.hostname}: {active_sessions}")

        # Backup configuration
        backup_result = self._backup_node_config(node)
        if not backup_result["success"]:
            checks["passed"] = False
            checks["issues"].append("Backup failed")

        return checks

    def generate_upgrade_report(self, results: Dict, output_file: str = None) -&gt; str:
        """Generate detailed upgrade report"""
        report = []
        report.append("=" * 80)
        report.append("ISE UPGRADE REPORT")
        report.append("=" * 80)
        report.append(f"Start Time: {results['start_time']}")
        report.append(f"End Time: {results.get('end_time', 'In Progress')}")
        report.append(f"Total Duration: {results.get('total_duration', 0) / 3600:.2f} hours")
        report.append(f"Overall Status: {'SUCCESS' if results['success'] else 'FAILED'}")
        report.append("")

        for phase in results["phases"]:
            report.append(f"Phase {phase['phase']}: {phase['description']}")
            report.append("-" * 40)

            if "groups" in phase:  # PSN rolling upgrade
                for group in phase["groups"]:
                    report.append(f"  Group {group['group']}:")
                    for node in group["nodes"]:
                        status = "✓" if node["success"] else "✗"
                        report.append(f"    {status} {node['node']}")
                        if not node["success"]:
                            report.append(f"      Error: {node.get('error', 'Unknown')}")
            else:
                for node in phase.get("nodes", []):
                    status = "✓" if node["success"] else "✗"
                    report.append(f"  {status} {node['node']}")
                    if not node["success"]:
                        report.append(f"    Error: {node.get('error', 'Unknown')}")

            report.append(f"  Duration: {phase.get('duration', 0) / 60:.2f} minutes")
            report.append("")

        report_text = "\n".join(report)

        if output_file:
            with open(output_file, 'w') as f:
                f.write(report_text)
            logger.info(f"Upgrade report saved to {output_file}")

        return report_text</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_integration_examples">Integration Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_servicenow_integration">ServiceNow Integration</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"># integrations/servicenow.py - ServiceNow ticket automation
class ServiceNowIntegration:
    """Integrate ISE with ServiceNow for automated workflows"""

    def __init__(self, ise_client: ISEClient, snow_config: Dict):
        self.ise = ise_client
        self.snow = self._init_snow_client(snow_config)

    def auto_provision_from_ticket(self, ticket_number: str) -&gt; Dict:
        """Auto-provision network access from ServiceNow request"""
        # Get ticket details
        ticket = self.snow.get_ticket(ticket_number)

        if ticket["type"] != "Network Access Request":
            return {"error": "Invalid ticket type"}

        # Extract endpoint information
        mac_address = ticket["custom_fields"]["mac_address"]
        owner_email = ticket["requested_for"]["email"]
        department = ticket["requested_for"]["department"]
        access_level = ticket["custom_fields"]["access_level"]

        # Determine ISE group based on access level
        group_mapping = {
            "employee": "Employees",
            "contractor": "Contractors",
            "guest": "Guests",
            "iot": "IoT_Devices"
        }
        group = group_mapping.get(access_level, "Unknown")

        # Create endpoint in ISE
        endpoint_data = {
            "ERSEndPoint": {
                "name": mac_address.replace(':', '').upper(),
                "mac": mac_address,
                "groupId": self.ise._get_group_id(group),
                "customAttributes": {
                    "attributes": {
                        "Owner": owner_email,
                        "Department": department,
                        "ServiceNowTicket": ticket_number,
                        "ApprovedBy": ticket["approved_by"]["name"],
                        "ApprovalDate": datetime.now().isoformat()
                    }
                }
            }
        }

        try:
            result = self.ise.create_endpoint(endpoint_data)

            # Update ServiceNow ticket
            self.snow.update_ticket(ticket_number, {
                "state": "Closed",
                "close_notes": f"Network access provisioned. ISE Endpoint ID: {result['id']}",
                "close_code": "Successful"
            })

            # Send notification
            self._notify_requester(owner_email, mac_address, group)

            return {
                "success": True,
                "endpoint_id": result["id"],
                "ticket": ticket_number
            }

        except Exception as e:
            # Update ticket with error
            self.snow.update_ticket(ticket_number, {
                "state": "Pending",
                "work_notes": f"Auto-provisioning failed: {str(e)}"
            })

            return {
                "success": False,
                "error": str(e),
                "ticket": ticket_number
            }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_production_deployment">Production Deployment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_daily_operations_script">Daily Operations Script</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python">#!/usr/bin/env python3
# scripts/daily_operations.py - Daily ISE automation tasks

import schedule
import time
from datetime import datetime
import logging
from ise_automation import ISEClient, EndpointManager, PolicyManager

# Configure logging
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('/var/log/ise_automation/daily.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

class DailyOperations:
    """Automated daily ISE operations"""

    def __init__(self):
        # Initialize ISE client
        self.nodes = self._load_node_config()
        self.client = ISEClient(
            nodes=self.nodes,
            username=os.getenv("ISE_USERNAME"),
            password=os.getenv("ISE_PASSWORD")
        )
        self.endpoint_mgr = EndpointManager(self.client)
        self.policy_mgr = PolicyManager(self.client)

    def morning_health_check(self):
        """Morning health check routine"""
        logger.info("Starting morning health check")

        # Check node health
        health_status = self.client.health_check()
        unhealthy = [n for n, s in health_status.items() if s["status"] != "healthy"]

        if unhealthy:
            self._alert_team(f"Unhealthy nodes detected: {unhealthy}")

        # Check replication status
        replication = self._check_replication()
        if not replication["in_sync"]:
            self._alert_team("Replication out of sync")

        # Check certificate expiration
        certs = self._check_certificates()
        expiring = [c for c in certs if c["days_until_expiry"] &lt; 30]
        if expiring:
            self._alert_team(f"Certificates expiring soon: {expiring}")

        logger.info("Morning health check completed")

    def cleanup_stale_endpoints(self):
        """Remove endpoints not seen in 90 days"""
        logger.info("Starting stale endpoint cleanup")

        results = self.endpoint_mgr.bulk_delete_stale(days_inactive=90)
        logger.info(f"Cleanup results: {results}")

        if results["deleted"]:
            self._send_report(
                "Stale Endpoint Cleanup",
                f"Deleted {len(results['deleted'])} stale endpoints"
            )

    def backup_configuration(self):
        """Daily configuration backup"""
        logger.info("Starting configuration backup")

        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")

        # Export policies
        policy_file = f"/backup/ise/policies_{timestamp}.yaml"
        self.policy_mgr.export_policies(policy_file)

        # Export endpoints
        endpoint_file = f"/backup/ise/endpoints_{timestamp}.csv"
        self.endpoint_mgr.export_all_endpoints(endpoint_file)

        # Trigger ISE backup
        for node in self.nodes:
            if node.role == "PAN" and node.active:
                self._trigger_node_backup(node)

        logger.info("Configuration backup completed")

    def generate_daily_reports(self):
        """Generate and send daily reports"""
        logger.info("Generating daily reports")

        # Authentication summary
        auth_report = self._generate_auth_report()

        # Compliance report
        compliance_report = self.endpoint_mgr.generate_compliance_report()

        # Guest usage report
        guest_report = self._generate_guest_report()

        # Send reports
        self._send_daily_reports({
            "authentication": auth_report,
            "compliance": compliance_report,
            "guest": guest_report
        })

        logger.info("Daily reports sent")

    def run(self):
        """Run scheduled tasks"""
        # Schedule tasks
        schedule.every().day.at("06:00").do(self.morning_health_check)
        schedule.every().day.at("02:00").do(self.cleanup_stale_endpoints)
        schedule.every().day.at("03:00").do(self.backup_configuration)
        schedule.every().day.at("07:00").do(self.generate_daily_reports)

        logger.info("Daily operations scheduler started")

        while True:
            schedule.run_pending()
            time.sleep(60)

if __name__ == "__main__":
    operations = DailyOperations()
    operations.run()</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance_metrics">Performance Metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After implementing this framework, our ISE operations have transformed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric</th>
<th class="tableblock halign-left valign-top">Before Automation</th>
<th class="tableblock halign-left valign-top">After Automation</th>
<th class="tableblock halign-left valign-top">Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Endpoint Import Time (10,000 MACs)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 hours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32x faster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy Deployment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 hours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24x faster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance Report Generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 hours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24x faster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upgrade Time (12 nodes)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 hours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 hours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4x faster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Daily Operational Tasks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 hours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 hours (automated)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100% reduction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTTR (Mean Time to Recovery)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">45 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9x faster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual Errors per Month</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">90% reduction</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_lessons_learned">Lessons Learned</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_works">What Works</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Bulk Operations</strong>: Always batch API calls—ISE handles bulk operations much better</p>
</li>
<li>
<p><strong>Rate Limiting</strong>: Essential to prevent overwhelming ISE</p>
</li>
<li>
<p><strong>Comprehensive Logging</strong>: Every action must be auditable</p>
</li>
<li>
<p><strong>Gradual Rollout</strong>: Test automation on small subsets first</p>
</li>
<li>
<p><strong>Version Control</strong>: Treat policies as code</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_common_pitfalls">Common Pitfalls</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Ignoring API Limits</strong>: ISE has undocumented rate limits</p>
</li>
<li>
<p><strong>No Rollback Plan</strong>: Always have a way to undo changes</p>
</li>
<li>
<p><strong>Insufficient Error Handling</strong>: ISE APIs can fail in unexpected ways</p>
</li>
<li>
<p><strong>Not Testing at Scale</strong>: What works for 100 endpoints might fail for 10,000</p>
</li>
<li>
<p><strong>Forgetting Maintenance Windows</strong>: Some operations require downtime</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This automation framework has fundamentally changed how we manage ISE. What used to take days now takes minutes. Human errors have nearly disappeared. Most importantly, our team can focus on architecture and improvement rather than repetitive tasks.</p>
</div>
<div class="paragraph">
<p>The framework continues to evolve. We&#8217;re currently adding machine learning for anomaly detection and predictive maintenance. The goal isn&#8217;t to replace engineers but to amplify their capabilities.</p>
</div>
<div class="paragraph">
<p>For those managing ISE at scale: start small, automate incrementally, and always maintain manual override capabilities. The investment in automation pays for itself within months through reduced downtime and operational efficiency.</p>
</div>
<hr>
<div class="paragraph">
<p><em>Next post: "Infrastructure as Code: Managing 500+ Network Devices with Terraform and Ansible" - How we manage our entire network infrastructure as code.</em></p>
</div>
<div class="openblock small">
<div class="content">
<div class="paragraph">
<p><strong>About the Author</strong>: Evan Rosado has automated away most of the tedious parts of ISE management, allowing him to focus on architecture and innovation. His framework manages ISE infrastructure supporting 75,000+ endpoints across multiple data centers.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-09-20 18:22:44 -0700
</div>
</div>
</body>
</html>